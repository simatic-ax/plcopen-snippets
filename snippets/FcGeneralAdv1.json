{
    "Insert General BlockTemplates": {
    "scope": "javascript,typescript,st",
    "prefix": ["fc, 4_adv"],
    "body": [
        "TYPE",
        "\ttypeDiagnosticsTemplateSimple : STRUCT",
        "\t\tstatus : Word;   // Status of the Block or error identification when error occurred",
        "\t\tsubfunctionStatus : Word;   // Status or return value of called FB's, FCs and system blocks",
        "\tEND_STRUCT;",
        "END_TYPE",

        "\t",
        "FUNCTION_BLOCK ${TM_FILENAME/(.*)\\..+$/$1/}",

        "\t",
        "\tVAR_INPUT",
        "\t\t",      
        "\tEND_VAR",

        "\t",
        "\tVAR_OUTPUT",
        "\t\terror : Bool;   //  TRUE: An error occurred during the execution of the FB",
        "\t\tstatus : Word;   //  WORD#16#0000 - WORD#16#7FFF: Status of the FB, WORD#16#8000 - WORD#16#FFFF: Error identification",
        "\t\tdiagnostics : typeDiagnosticsTemplateSimple;   //  Diagnostics information of FC (optional)",
        "\tEND_VAR",

        "\t",
        "\tVAR",
        "\t\tstatVariable : Bool;   //  staticTag to store values between cyclic call's",
        "\t\tstatDiagnostics : typeDiagnosticsTemplateSimple;   //  Static diagnostic type to store internal diagnostic data like status and return value of called FBs, FCs and system blocks",
        "\t\tstatEmptyDiagnostics : typeDiagnosticsTemplateSimple;   //  Empty diagnostics information (for initialization purposes only)",
        "\tEND_VAR",

        "\t",
        "\tVAR_TEMP",
        "\t\ttempDiagnostics : typeDiagnosticsTemplateSimple;   //  temp diagnostic type to store internal diagnostic data like status and return value of called FCs and system blocks",        
        "\tEND_VAR",

        "\t",
        "\tVAR CONSTANT",
        "\t\tSTATUS_FINISHED_NO_ERROR : Word := WORD#16#0000;   //  NO error - execution finished without errors",
        "\t\tSUB_STATUS_NO_ERROR : Word := WORD#16#0000;   //  NO error occured in subfunction call",
        "\t\tERR_UNDEFINED : Word := WORD#16#8000;   //  Error: due to an undefined case",
        "\t\tERR_IN_BLOCK_OPERATION : Word := WORD#16#8001;   //  Error: Wrong operation of the function block",
        "\t\tERR_PARAMETRIZATION : Word := WORD#16#8200;   //  Error: during parameterization",
        "\t\tERR_PROCESSING_EXTERN : Word := WORD#16#8400;   //  Error: when processing from outside (e. g. wrong I/O signals, axis not referenced)",
        "\t\tERR_PROCESSING_INTERN : Word := WORD#16#8600;   //  Error: when processing internally (e. g. when calling a system function)",
        "\t\tERR_AREA_RESERVED : Word := WORD#16#8800;   //  Error: Reserved area",
        "\t\tERR_USER_DEFINED_CLASSES : Word := WORD#16#9000;   //  Error: User-defined error classes",
        "\tEND_VAR",

        "${C:",
	    "\t//===============================================================================",
	    "\t// (company) / (c)Copyright (year)",
	    "\t//-------------------------------------------------------------------------------",
	    "\t// Title:            (Title of this Block)",
	    "\t// Comment/Function: (that is implemented in the block)",
	    "\t// Library/Family:   (that the source is dedicated to)",
	    "\t// Author:           (department / person in charge / contact)",
	    "\t// Tested with:      (test system with version)",
	    "\t// Engineering:      SIMATIC AX (SDK version)",
	    "\t// Restrictions:     (OB types, etc.)",
	    "\t// Requirements:     (hardware, technological package, memory needed, etc.)",
	    "\t//-------------------------------------------------------------------------------",
	    "\t// Change log table:",
	    "\t// Version  | Date       | Expert in charge       | Changes applied",
	    "\t//----------|------------|------------------------|------------------------------",
	    "\t// 01.00.00 | yyyy-mm-dd | (name of expert)       | First released version",
	    "\t//===============================================================================","}",

        "${C:",
        "    // TODO: Initialize functionality: reset of variables, diagnostics, etc.",
        "    ",
        "    tempDiagnostics.status := STATUS_FINISHED_NO_ERROR;",
        "    tempDiagnostics.subfunctionStatus := SUB_STATUS_NO_ERROR;",
        "    ",
        "    // TODO: Use this region for application specific code",
        "    ",
        "    // just an example code fragment",
        "    ",
        "    // TODO: Write application specific temp values to outputs",
        "    error := tempDiagnostics.status.%X15;",
        "    status := tempDiagnostics.status;",
        "    diagnostics := tempDiagnostics;",
        "}",

        "END_FUNCTION_BLOCK"         
    ],
    "description": "[PLCOPEN-SNIPPETS] FC general (Advanced)"
    }
}